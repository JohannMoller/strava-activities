lowdefy: 4.0.0-rc.0
name: Lowdefy Strava Activities

auth:
  providers:
    - id: strava
      type: StravaProvider
      properties:
        clientId:
          _secret: STRAVA_CLIENT_ID
        clientSecret:
          _secret: STRAVA_CLIENT_SECRET
connections:
  - id: strava-api
    type: AxiosHttp
    properties:
      baseURL: https://www.strava.com/api/v3
      headers:
        Authorization:
          _string.concat:
            - 'Bearer '
            - _payload: access_token
  - id: strava-oauth
    type: AxiosHttp
    properties:
      baseURL: https://www.strava.com/api/v3/oauth
  - id: strava-activities
    type: MongoDBCollection
    properties:
      databaseUri:
        _secret: MONGODB_URI
      collection: activities
      write: true
  - id: strava-activities-temp
    type: MongoDBCollection
    properties:
      databaseUri:
        _secret: MONGODB_URI
      collection: activities-temp
      write: true

pages:
  - _ref: pages/home.yaml
  - _ref: pages/authenticated.yaml
  - _ref: pages/report/report.yaml
